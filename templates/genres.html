<!DOCTYPE html>
<html>
    <head>
        <title>Aplikacja do polecania muzyki</title>
    </head>
    <body>
        <div id='result'>
            <h2>wybierz gatunki jakie cie interesuja</h2>
            <a href="/">Powrot</a>
            <form id='form' action="/genre" method="post">
                <div id="genreButtons"></div>
                <input type="hidden" id="clickedGenre" name="genre">
                <input type="submit" value="hip-hop">
            </form>
        </div>
        <script>
            fetch('/genres')
                .then(response => response.json())
                .then(data => {
                    const genreButtonsDiv = document.getElementById('genreButtons');
                    data.forEach(genre => {
                        const button = document.createElement('input');
                        button.type = 'submit';
                        button.name = 'genre';
                        button.value = genre;
                        genreButtonsDiv.appendChild(button);

                        button.addEventListener('click', function(event) {
                            event.preventDefault(); // Zatrzymaj domyślne zachowanie przycisku

                            const clickedGenre = genre;
                            console.log('Kliknięty gatunek:', clickedGenre);

                            // Przypisanie nazwy gatunku do ukrytego pola formularza
                            const clickedGenreInput = document.getElementById('clickedGenre');
                            clickedGenreInput.value = clickedGenre;

                            // Wysyłanie formularza do serwera
                            const form = document.getElementById('form');
                            form.submit();
                        });
                    });
                });
        </script>
    </body>
</html>